<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>
    <link rel="stylesheet" href="/css/global.css" />
    <link rel="stylesheet" href="/css/shared.css" />
    <link rel="stylesheet" href="/css/index.css" />
    <meta
      name="description"
      content="Local Community Portal - Connecting residents with local events, activities, and services"
    />
    <meta
      name="keywords"
      content="community, events, local, activities, services, portal"
    />
  </head>
  <body>
    <%- include('partials/header') %>

    <!-- Hero Section -->
    <section id="home" class="hero">
      <div class="hero-container">
        <div class="hero-content">
          <h1>Welcome to Your Local Community Portal</h1>
          <p>
            Discover events, activities, and services that bring our community
            together
          </p>
          <button class="cta-button">Explore Now</button>
        </div>
      </div>
    </section>

    <!-- Featured Events Section -->
    <% if (featuredEvents && featuredEvents.length > 0) { %>
    <section class="featured-event">
      <div class="container">
        <h2 class="section-title">Featured Events</h2>
        <p class="section-subtitle">
          Don't miss these highlighted community events
        </p>

        <div class="featured-events-grid">
          <% featuredEvents.forEach(event => { %>
          <div class="event-highlight">
            <div class="event-badge">
              <span>FEATURED</span>
            </div>
            <div class="event-content">
              <h2>ðŸŽª <%= event.title %></h2>
              <div class="event-details">
                <div class="event-date">
                  <strong>Date:</strong> <%= new
                  Date(event.date).toLocaleDateString('en-GB', { weekday:
                  'long', year: 'numeric', month: 'long', day: 'numeric' }) %>
                </div>
                <div class="event-time">
                  <strong>Time:</strong> <%= event.start_time %><% if
                  (event.end_time) { %> - <%= event.end_time %><% } %>
                </div>
                <div class="event-location">
                  <strong>Location:</strong> <%= event.location %>
                </div>
                <% if (event.category_name) { %>
                <div class="event-category">
                  <strong>Category:</strong> <%= event.category_name %>
                </div>
                <% } %>
              </div>
              <p class="event-description"><%= event.description %></p>
              <div class="event-actions">
                <button
                  class="btn-primary get-directions-btn"
                  data-address="<%= event.address %>"
                  data-event-name="<%= event.title %>"
                >
                  Get Directions
                </button>
              </div>
            </div>
          </div>
          <% }) %>
        </div>
      </div>
    </section>
    <% } %>

    <!-- Community Areas Section -->
    <section id="areas" class="community-areas">
      <div class="container">
        <h2 class="section-title">Explore Community Areas</h2>
        <p class="section-subtitle">
          Discover what's happening in different areas of interest
        </p>

        <%- include('partials/community-areas', { areas: communityAreas,
        showActivities: 'current', showActions: true, isHomepage: true }) %>

        <div class="view-all-areas">
          <a href="/areas"
            ><button class="btn-secondary">View All Community Areas</button></a
          >
        </div>
      </div>
    </section>

    <!-- Upcoming Events Section -->
    <section id="events" class="upcoming-events">
      <div class="container">
        <div class="events-header">
          <h2 class="section-title">Upcoming Events</h2>
        </div>
        <div id="eventsGrid" class="events-grid">
          <% upcomingEvents.forEach(event => { %>
          <div class="event-card">
            <div class="event-date-badge">
              <% const eventDate = new Date(event.date); const monthNames =
              ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP",
              "OCT", "NOV", "DEC"]; %>
              <span class="month"><%= monthNames[eventDate.getMonth()] %></span>
              <span class="day"><%= eventDate.getDate() %></span>
            </div>
            <div class="event-info">
              <h3><%= event.title %></h3>
              <p class="event-time">
                <%= event.start_time %><% if (event.end_time) { %> - <%=
                event.end_time %><% } %>
              </p>
              <p class="event-location"><%= event.location %></p>
              <% if (event.category_name) { %>
              <p class="event-category"><%= event.category_name %></p>
              <% } %>
              <p><%= event.description %></p>
            </div>
          </div>
          <% }) %>
        </div>
        <div id="eventsLoading" class="events-loading hidden">
          <div class="loading-spinner"></div>
          <p>Loading events...</p>
        </div>
        <div class="view-all-events">
          <a href="/events"
            ><button class="btn-secondary">View All Events</button></a
          >
        </div>
      </div>
    </section>

    <%- include('partials/footer') %>

    <!-- Cookie Consent Banner - Direct HTML for testing -->
    <div id="cookieBanner" class="cookie-banner">
      <div class="cookie-banner-content">
        <div class="cookie-banner-text">
          <h3>We Value Your Privacy</h3>
          <p>
            We use cookies to enhance your experience on our community portal.
            These help us provide personalized content and analyze site usage.
            <a href="/privacy" target="_blank"
              >Learn more about our privacy practices</a
            >
          </p>
        </div>
        <div class="cookie-banner-actions">
          <button id="cookieDecline" class="cookie-btn cookie-btn-decline">
            Decline
          </button>
          <button id="cookieAccept" class="cookie-btn cookie-btn-accept">
            Accept All
          </button>
        </div>
      </div>
    </div>


    <script src="/js/script.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="/css/styles.css">
    <meta name="description" content="Local Community Portal - Connecting residents with local events, activities, and services">
    <meta name="keywords" content="community, events, local, activities, services, portal">
</head>
<body>
    <%- include('partials/header') %>
    
    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-container">
            <div class="hero-content">
                <h1>Welcome to Your Local Community Portal</h1>
                <p>Discover events, activities, and services that bring our community together</p>
                <button class="cta-button">Explore Now</button>
            </div>
        </div>
    </section>

    <!-- Featured Live Event -->
    <% if (featuredEvent) { %>
    <section class="featured-event">
        <div class="container">
            <div class="event-highlight">
                <div class="event-badge">
                    <span>FEATURED EVENT</span>
                </div>
                <div class="event-content">
                    <h2>ðŸŽª <%= featuredEvent.title %></h2>
                    <div class="event-details">
                        <div class="event-date">
                            <strong>Date:</strong> <%= featuredEvent.date %>
                        </div>
                        <div class="event-time">
                            <strong>Time:</strong> <%= featuredEvent.time %>
                        </div>
                        <div class="event-location">
                            <strong>Location:</strong> <%= featuredEvent.location %>
                        </div>
                    </div>
                    <p class="event-description">
                        <%= featuredEvent.description %>
                    </p>
                    <div class="event-actions">
                        <button class="btn-primary">Get Directions</button>
                        <button class="btn-secondary">View Schedule</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <% } %>

    <!-- Community Areas Section -->
    <section id="areas" class="community-areas">
        <div class="container">
            <h2 class="section-title">Explore Community Areas</h2>
            <p class="section-subtitle">Discover what's happening in different areas of interest</p>
            
            <%- include('partials/community-areas', { 
                areas: communityAreas, 
                showActivities: 'current',
                showActions: true,
                isHomepage: true 
            }) %>
            
            <div class="view-all-areas">
                <a href="/areas"><button class="btn-secondary">View All Community Areas</button></a>
            </div>
        </div>
    </section>

    <!-- Upcoming Events Section -->
    <section id="events" class="upcoming-events">
        <div class="container">
            <div class="events-header">
                <h2 class="section-title">Upcoming Events</h2>
                <button id="refreshEvents" class="refresh-button">
                    <span class="refresh-icon">ðŸ”„</span>
                    Refresh Events
                </button>
            </div>
            <div id="eventsGrid" class="events-grid">
                <% upcomingEvents.forEach(event => { %>
                <div class="event-card">
                    <div class="event-date-badge">
                        <% 
                        const eventDate = new Date(event.date);
                        const monthNames = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN",
                                          "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];
                        %>
                        <span class="month"><%= monthNames[eventDate.getMonth()] %></span>
                        <span class="day"><%= eventDate.getDate() %></span>
                    </div>
                    <div class="event-info">
                        <h3><%= event.title %></h3>
                        <p class="event-time"><%= event.time %></p>
                        <p class="event-location"><%= event.location %></p>
                        <p><%= event.description %></p>
                    </div>
                </div>
                <% }) %>
            </div>
            <div id="eventsLoading" class="events-loading" style="display: none;">
                <div class="loading-spinner"></div>
                <p>Loading events...</p>
            </div>
            <div class="view-all-events">
                <a href="/events"><button class="btn-secondary">View All Events</button></a>
            </div>
        </div>
    </section>

    <!-- Search Section -->
    <section class="search-section">
        <div class="container">
            <h2 class="section-title">Search Events & Activities</h2>
            <div class="search-container">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search for events, activities, or community areas..." autocomplete="off">
                    <button id="searchBtn" class="search-button">Search</button>
                </div>
                <div class="search-filters">
                    <select id="categoryFilter">
                        <option value="">All Categories</option>
                        <option value="community">Community Events</option>
                        <option value="entertainment">Entertainment</option>
                        <option value="education">Education</option>
                        <option value="health">Health & Wellness</option>
                        <option value="sports">Sports & Recreation</option>
                        <option value="arts">Arts & Culture</option>
                        <option value="shopsafe">Shop Safe, Shop Local</option>
                    </select>
                    <button id="clearSearch" class="clear-button">Clear</button>
                </div>
            </div>
            <div id="searchResults" class="search-results"></div>
            <div id="searchLoading" class="search-loading" style="display: none;">
                <div class="loading-spinner"></div>
                <p>Searching...</p>
            </div>
        </div>
    </section>

    <!-- Quick Links Section -->
    <section class="quick-links">
        <div class="container">
            <h2 class="section-title">Quick Access</h2>
            <div class="links-grid">
                <a href="#" class="quick-link-card">
                    <div class="link-icon">ðŸ“‹</div>
                    <h3>Event Registration</h3>
                    <p>Sign up for community events</p>
                </a>
                <a href="/events" class="quick-link-card">
                    <div class="link-icon">ðŸ“…</div>
                    <h3>Community Calendar</h3>
                    <p>View full event calendar</p>
                </a>
                <a href="#" class="quick-link-card">
                    <div class="link-icon">ðŸ’¬</div>
                    <h3>Discussion Board</h3>
                    <p>Community discussions</p>
                </a>
                <a href="/contact" class="quick-link-card">
                    <div class="link-icon">ðŸ“ž</div>
                    <h3>Get Involved</h3>
                    <p>Contact us to participate</p>
                </a>
            </div>
        </div>
    </section>

    <%- include('partials/footer') %>
    
    <script src="/js/script.js"></script>
</body>
</html>